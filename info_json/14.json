{
  "id": 14,
  "repo": "fedimint",
  "issue_url": "https://github.com/fedimint/fedimint/issues/2341",
  "pr_url": "https://github.com/fedimint/fedimint/pull/2530",
  "issue_description": "I have twice seen this error when running `scripts/cli-test.sh`:\r\n\r\n```\r\nError: Peg-out address received 0.000005 BTC, expected 0.00000500\r\n```\r\n\r\nThe two numbers are equal, but padded differently with zeros.",
  "files_changed": [
    {
      "filename": "devimint/src/main.rs",
      "status": "modified",
      "patch": "@@ -256,15 +256,15 @@ async fn cli_tests(dev_fed: DevFed) -> Result<()> {\n         let received_by_addr = bitcoind\n             .client()\n             .get_received_by_address(&pegout_addr.clone(), Some(0))?;\n-        Ok(received_by_addr != amount)\n+        Ok(received_by_addr == amount)\n     })\n     .await?;\n     bitcoind.mine_blocks(10).await?;\n     let received = bitcoind\n         .client()\n         .get_received_by_address(&pegout_addr, Some(0))?;\n     anyhow::ensure!(\n-        received != amount,\n+        received == amount,\n         \"Peg-out address received {}, expected {}\",\n         received,\n         amount\n@@ -654,14 +654,16 @@ async fn cli_tests(dev_fed: DevFed) -> Result<()> {\n         .await?\n         .as_u64()\n         .unwrap();\n+\n+    let expected_diff = 3030;\n     anyhow::ensure!(\n-        initial_client_ng_balance - final_cln_outgoing_client_ng_balance == 3030,\n-        \"Client NG balance changed by {} on CLN outgoing payment, expected 1010\",\n+        initial_client_ng_balance - final_cln_outgoing_client_ng_balance == expected_diff,\n+        \"Client NG balance changed by {} on CLN outgoing payment, expected {expected_diff}\",\n         initial_client_ng_balance - final_cln_outgoing_client_ng_balance\n     );\n     anyhow::ensure!(\n-        final_cln_outgoing_gateway_balance - initial_cln_gateway_balance == 3030,\n-        \"CLN Gateway balance changed by {} on CLN outgoing payment, expected 1010\",\n+        final_cln_outgoing_gateway_balance - initial_cln_gateway_balance == expected_diff,\n+        \"CLN Gateway balance changed by {} on CLN outgoing payment, expected {expected_diff}\",\n         final_cln_outgoing_gateway_balance - initial_cln_gateway_balance\n     );\n "
    }
  ],
  "fix_category": "Comparison operator",
  "root_cause_category": "Logic",
  "root_cause_subcategory": "Inverted Conditional"
}