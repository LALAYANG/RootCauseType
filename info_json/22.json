{
  "id": 22,
  "repo": "databend",
  "issue_url": "https://github.com/databendlabs/databend/issues/6188",
  "pr_url": "https://github.com/databendlabs/databend/pull/6189",
  "issue_description": "**Summary**\r\n\r\ncc @dantengsky \r\n\r\nhttps://github.com/datafuselabs/databend/runs/7029746235?check_suite_focus=true\r\n\r\n```\r\n FAIL ] - result differs with:\r\n--- /Users/runner/work/databend/databend/tests/suites/0_stateless/09_fuse_engine/09_0017_func_fuse_snapshot_history_limit.result\t2022-06-23 18:36:04.000000000 +0000\r\n+++ /Users/runner/work/databend/databend/tests/suites/0_stateless/09_fuse_engine/09_0017_func_fuse_snapshot_history_limit.stdout\t2022-06-23 18:39:18.000000000 +0000\r\n@@ -1,19 +1,19 @@\r\n limit 1 using new planner\r\n-1\r\n+       1\r\n limit 0 using new planner\r\n-0\r\n+       0\r\n limit 1 using old planner\r\n-1\r\n+       1\r\n limit 0 using old planner\r\n-0\r\n+       0\r\n limit 1 using stored procedure\r\n-1\r\n+       1\r\n limit 0 using stored procedure\r\n-0\r\n+       0\r\n limit 0 using stored procedure, limit as string\r\n-0\r\n+       0\r\n no limits using stored procedure, expects 2\r\n-2\r\n+       2\r\n invalid limit, negative value\r\n ERROR 1105 (HY000) at line 1: Code: 1005, displayText = sql parser error: Expected a value, found: -.\r\n invalid limit, no numeric\r\nHaving 1 errors! 198 tests passed.                     2 tests skipped.\r\nThe failure tests:\r\n    /Users/runner/work/databend/databend/tests/suites/0_stateless/09_fuse_engine/09_0017_func_fuse_snapshot_history_limit.sh\r\n```\r\n",
  "files_changed": [
    {
      "filename": "tests/suites/0_stateless/09_fuse_engine/09_0017_func_fuse_snapshot_history_limit.sh",
      "status": "modified",
      "patch": "@@ -11,23 +11,23 @@ echo \"insert into t09_0017 values(2)\" | $MYSQL_CLIENT_CONNECT\n \n ## test limit clause\n echo \"limit 1 using new planner\"\n-echo \"set enable_planner_v2 = 1; select * from fuse_snapshot('default', 't09_0017') limit 1\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"set enable_planner_v2 = 1; select * from fuse_snapshot('default', 't09_0017') limit 1\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"limit 0 using new planner\"\n-echo \"set enable_planner_v2 = 1; select * from fuse_snapshot('default', 't09_0017') limit 0\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"set enable_planner_v2 = 1; select * from fuse_snapshot('default', 't09_0017') limit 0\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n \n echo \"limit 1 using old planner\"\n-echo \"set enable_planner_v2 = 0; select * from fuse_snapshot('default', 't09_0017') limit 1\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"set enable_planner_v2 = 0; select * from fuse_snapshot('default', 't09_0017') limit 1\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"limit 0 using old planner\"\n-echo \"set enable_planner_v2 = 0; select * from fuse_snapshot('default', 't09_0017') limit 0\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"set enable_planner_v2 = 0; select * from fuse_snapshot('default', 't09_0017') limit 0\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n \n echo \"limit 1 using stored procedure\"\n-echo \"call system\\$fuse_snapshot('default', 't09_0017', 1)\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"call system\\$fuse_snapshot('default', 't09_0017', 1)\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"limit 0 using stored procedure\"\n-echo \"call system\\$fuse_snapshot('default', 't09_0017', 0)\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"call system\\$fuse_snapshot('default', 't09_0017', 0)\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"limit 0 using stored procedure, limit as string\"\n-echo \"call system\\$fuse_snapshot('default', 't09_0017', '0')\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"call system\\$fuse_snapshot('default', 't09_0017', '0')\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"no limits using stored procedure, expects 2\"\n-echo \"call system\\$fuse_snapshot('default', 't09_0017')\" | $MYSQL_CLIENT_CONNECT | wc -l\n+echo \"call system\\$fuse_snapshot('default', 't09_0017')\" | $MYSQL_CLIENT_CONNECT | wc -l | sed 's/ //g'\n echo \"invalid limit, negative value\"\n echo \"call system\\$fuse_snapshot('default', 't09_0017', -1)\" | $MYSQL_CLIENT_CONNECT 2>&1\n echo \"invalid limit, no numeric\""
    }
  ],
  "fix_category": NaN,
  "root_cause_category": NaN,
  "root_cause_subcategory": "!Rust (CI)"
}