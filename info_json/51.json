{
  "id": 51,
  "repo": "datafusion-comet",
  "issue_url": "https://github.com/apache/datafusion-comet/issues/76",
  "pr_url": "https://github.com/apache/datafusion-comet/pull/112",
  "issue_description": "### Describe the bug\n\nGithub CI for MacOS x86_64 is currently flaky with message:\r\n\r\n```\r\nWARNING: /Users/runner/hostedtoolcache/Java_Zulu_jdk/8.0.402-6/x64/jre/bin/java is loading libcrypto in an unsafe way\r\n```\r\n\r\nSome attempts have been made in #55 and #41, but it is still not resolved.\r\n\n\n### Steps to reproduce\n\nCheck the post-commit CI runs and occasionally it still fails with the above message.\n\n### Expected behavior\n\nThe CI for MacOS x86_64 should pass consistently.\n\n### Additional context\n\n_No response_",
  "files_changed": [
    {
      "filename": ".github/actions/setup-macos-builder/action.yaml",
      "status": "modified",
      "patch": "@@ -49,12 +49,13 @@ runs:\n         unzip $PROTO_ZIP\n         echo \"$HOME/d/protoc/bin\" >> $GITHUB_PATH\n         export PATH=$PATH:$HOME/d/protoc/bin\n-        # install openssl and setup DYLD_LIBRARY_PATH to work with libcrypto.dylib loading issues with x86_64 mac runners\n-        # see PR https://github.com/apache/arrow-datafusion-comet/pull/55 for more details\n+        # install openssl and setup DYLD_LIBRARY_PATH\n         brew install openssl\n-        OPENSSL_LIB_PATH=$(dirname `brew list openssl | grep 'lib/libcrypto.dylib'`)\n+        OPENSSL_LIB_PATH=`brew --prefix openssl`/lib\n         echo \"openssl lib path is: ${OPENSSL_LIB_PATH}\"\n-        export DYLD_LIBRARY_PATH=$OPENSSL_LIB_PATH:$DYLD_LIBRARY_PATH\n+        echo \"DYLD_LIBRARY_PATH=$OPENSSL_LIB_PATH:$DYLD_LIBRARY_PATH\" >> $GITHUB_ENV\n+        # output the current status of SIP for later debugging\n+        csrutil status || true\n \n     - name: Install JDK ${{inputs.jdk-version}}\n       uses: actions/setup-java@v4"
    },
    {
      "filename": ".github/workflows/pr_build.yml",
      "status": "modified",
      "patch": "@@ -70,7 +70,7 @@ jobs:\n   macos-test:\n     strategy:\n       matrix:\n-        os: [macos-latest]\n+        os: [macos-13]\n         java_version: [8, 11, 17]\n         test-target: [rust, java]\n         is_push_event:"
    }
  ],
  "fix_category": "Narrowed setup",
  "root_cause_category": "Environment",
  "root_cause_subcategory": "Shared libraries"
}