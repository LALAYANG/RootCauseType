{
  "id": 76,
  "repo": "parsec-cloud",
  "issue_url": "https://github.com/Scille/parsec-cloud/issues/1818",
  "pr_url": "https://github.com/Scille/parsec-cloud/pull/1936",
  "issue_description": "https://dev.azure.com/Scille/parsec/_build/results?buildId=6790&view=logs&j=9f3e303d-b600-5bc4-7db5-6a575064fdf8&t=5c7e6194-c106-5f8b-486e-cb53cecf9e9e&l=2897\r\n\r\n```\r\n[gw1] [ 90%] ERROR tests/core/mountpoint/test_base.py::test_mountpoint_path_already_in_use Coverage.py warning: Module parsec was previously imported, but not measured (module-not-measured)\r\nCoverage.py warning: Module parsec was previously imported, but not measured (module-not-measured)\r\n\r\n\r\nINFO     parsec.core.mountpoint.fuse_runner:fuse_runner.py:237 2021-08-27 15:28:17 [info     ] Stopping fuse thread...        [parsec.core.mountpoint.fuse_runner] mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (3)')\r\nINFO     parsec.core.mountpoint.fuse_runner:fuse_runner.py:302 2021-08-27 15:28:21 [info     ] Fuse thread stopped            [parsec.core.mountpoint.fuse_runner] mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (3)')\r\nDEBUG    parsec.event_bus:event_bus.py:86 2021-08-27 15:28:21 [debug    ] Send event                     [parsec.event_bus] event_type=<CoreEvent.MOUNTPOINT_STOPPED: 'mountpoint.stopped'> mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (3)') workspace_id=<EntryID c9607cde86794aa5920444c63473aa4a>\r\nDEBUG    parsec.event_bus:event_bus.py:86 2021-08-27 15:28:21 [debug    ] Send event                     [parsec.event_bus] event_type=<CoreEvent.MOUNTPOINT_STOPPING: 'mountpoint.stopping'> mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (2)') workspace_id=<EntryID c9607cde86794aa5920444c63473aa4a>\r\nINFO     parsec.core.mountpoint.fuse_runner:fuse_runner.py:237 2021-08-27 15:28:21 [info     ] Stopping fuse thread...        [parsec.core.mountpoint.fuse_runner] mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (2)')\r\nERROR    parsec.core.mountpoint.fuse_runner:fuse_runner.py:263 2021-08-27 15:28:29 [error    ] Fuse thread stop timeout       [parsec.core.mountpoint.fuse_runner] mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (2)')\r\nINFO     parsec.core.mountpoint.fuse_runner:fuse_runner.py:302 2021-08-27 15:28:32 [info     ] Fuse thread stopped            [parsec.core.mountpoint.fuse_runner] mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (2)')\r\nDEBUG    parsec.event_bus:event_bus.py:86 2021-08-27 15:28:32 [debug    ] Send event                     [parsec.event_bus] event_type=<CoreEvent.MOUNTPOINT_STOPPED: 'mountpoint.stopped'> mountpoint=PosixPath('/private/var/folders/24/8k48jl6d249_n_qfxwsl6xvm0000gn/T/pytest-of-runner/pytest-0/popen-gw1/test_mountpoint_path_already_i0/base_mountpoint/w (2)') workspace_id=<EntryID c9607cde86794aa5920444c63473aa4a>\r\n=============================== warnings summary ===============================\r\n/Users/runner/hostedtoolcache/Python/3.7.11/x64/lib/python3.7/site-packages/_pytest/junitxml.py:417\r\n  /Users/runner/hostedtoolcache/Python/3.7.11/x64/lib/python3.7/site-packages/_pytest/junitxml.py:417: PytestDeprecationWarning: The 'junit_family' default value will change to 'xunit2' in pytest 6.0.\r\n  Add 'junit_family=xunit1' to your pytest.ini file to keep the current format in future versions of pytest and silence this warning.\r\n    _issue_warning_captured(deprecated.JUNIT_XML_DEFAULT_FAMILY, config.hook, 2)\r\n\r\n-- Docs: https://docs.pytest.org/en/latest/warnings.html\r\n------ generated xml file: /Users/runner/work/1/s/test-results-memory.xml ------\r\n\r\n\r\n========================== slowest 10 test durations ===========================\r\n170.56s call     tests/core/test_sync_monitor_stateful.py::test_sync_monitor_stateful\r\n```",
  "files_changed": [
    {
      "filename": "newsfragments/1818.empty.rst",
      "status": "added",
      "patch": ""
    },
    {
      "filename": "tests/core/mountpoint/test_base.py",
      "status": "modified",
      "patch": "@@ -84,6 +84,9 @@ async def test_base_mountpoint_not_created(base_mountpoint, alice_user_fs, event\n @pytest.mark.trio\n @pytest.mark.mountpoint\n @pytest.mark.skipif(sys.platform == \"win32\", reason=\"Windows uses drive\")\n+@pytest.mark.skipif(\n+    sys.platform == \"darwin\", reason=\"Inconsistent on Catalina. TODO: bring back with Monterey CI\"\n+)\n async def test_mountpoint_path_already_in_use(\n     base_mountpoint, running_backend, alice_user_fs, alice2_user_fs\n ):\n@@ -218,6 +221,9 @@ async def test_idempotent_mount(base_mountpoint, alice_user_fs, event_bus, manua\n \n @pytest.mark.trio\n @pytest.mark.mountpoint\n+@pytest.mark.skipif(\n+    sys.platform == \"darwin\", reason=\"Inconsistent on Catalina. TODO: bring back with Monterey CI\"\n+)\n async def test_work_within_logged_core(base_mountpoint, core_config, alice, tmpdir):\n     core_config = core_config.evolve(mountpoint_base_dir=base_mountpoint)\n \n@@ -544,6 +550,9 @@ def test_nested_rw_access(mountpoint_service):\n @pytest.mark.mountpoint\n @pytest.mark.parametrize(\"n\", [10, 100, 1000])\n @pytest.mark.parametrize(\"base_path\", [\"/\", \"/foo\"])\n+@pytest.mark.skipif(\n+    sys.platform == \"darwin\", reason=\"Inconsistent on Catalina. TODO: bring back with Monterey CI\"\n+)\n async def test_mountpoint_iterdir_with_many_files(\n     n, base_path, base_mountpoint, alice_user_fs, event_bus\n ):\n@@ -578,6 +587,9 @@ async def test_mountpoint_iterdir_with_many_files(\n \n @pytest.mark.trio\n @pytest.mark.mountpoint\n+@pytest.mark.skipif(\n+    sys.platform == \"darwin\", reason=\"Inconsistent on Catalina. TODO: bring back with Monterey CI\"\n+)\n async def test_cancel_mount_workspace(base_mountpoint, alice_user_fs, event_bus):\n     \"\"\"\n     This function tests the race conditions between the mounting of a workspace"
    }
  ],
  "fix_category": NaN,
  "root_cause_category": NaN,
  "root_cause_subcategory": "Skipped/Ignored"
}